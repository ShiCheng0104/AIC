<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智能聊天助手</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome图标 -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置Tailwind主题 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36D399',
            neutral: '#F5F7FA',
            dark: '#1E293B',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
    }
  </style>
</head>
<body class="bg-gray-50 font-inter min-h-screen flex flex-col">
  <!-- 页面头部 -->
  <header class="bg-white shadow-sm py-4 px-6">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold text-primary flex items-center">
        <i class="fa fa-comment-o mr-2"></i>
        智能聊天助手
      </h1>
      <button class="text-gray-500 hover:text-primary transition-colors">
        <i class="fa fa-cog"></i>
      </button>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="flex-1 container mx-auto px-4 py-6">
    <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden flex flex-col h-[80vh]">
      <!-- 聊天历史区 -->
      <div id="chat-history" class="flex-1 overflow-y-auto p-4 scrollbar-hide space-y-4">
        <!-- 欢迎消息 -->
        <div class="flex items-start mb-4">
          <div class="bg-primary/10 p-2 rounded-full mr-3">
            <i class="fa fa-robot text-primary"></i>
          </div>
          <div class="bg-neutral rounded-lg rounded-tl-none p-4 max-w-[80%] shadow-sm">
            <p class="text-dark">你好！我是智能聊天助手，有什么可以帮助你的吗？</p>
          </div>
        </div>
        
        <!-- 加载中消息（默认隐藏） -->
        <div id="loading-message" class="flex items-start mb-4 hidden">
          <div class="bg-primary/10 p-2 rounded-full mr-3">
            <i class="fa fa-robot text-primary"></i>
          </div>
          <div class="bg-neutral rounded-lg rounded-tl-none p-4 max-w-[80%] shadow-sm">
            <div class="flex space-x-1">
              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
              <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 分隔线 -->
      <div class="border-t border-gray-100"></div>
      
      <!-- 输入区域 -->
      <div class="p-4">
        <div class="relative">
          <textarea 
            id="user-input" 
            placeholder="输入问题..." 
            class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary resize-none transition-all"
            rows="3"
          ></textarea>
          <button 
            id="send-button" 
            class="absolute right-3 bottom-3 bg-primary text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <i class="fa fa-paper-plane"></i>
          </button>
        </div>
        <p class="text-xs text-gray-400 mt-2">按 Enter 发送消息，Shift+Enter 换行</p>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-white py-4 px-6 border-t border-gray-100">
    <div class="container mx-auto text-center text-gray-500 text-sm">
      <p>© 2023 智能聊天助手 | 设计与开发</p>
    </div>
  </footer>

  <script>
    // DOM 元素
    const chatHistory = document.getElementById('chat-history');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const loadingMessage = document.getElementById('loading-message');
    
    // 发送消息
    function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;
      
      // 添加用户消息到聊天历史
      addMessageToChat('user', message);
      
      // 清空输入框
      userInput.value = '';
      
      // 显示加载状态
      loadingMessage.classList.remove('hidden');
      
      // 模拟API请求（实际使用时替换为真实API调用）
      simulateApiRequest(message)
        .then(response => {
          // 隐藏加载状态
          loadingMessage.classList.add('hidden');
          
          // 添加AI回复到聊天历史
          addMessageToChat('ai', response);
        })
        .catch(error => {
          // 隐藏加载状态
          loadingMessage.classList.add('hidden');
          
          // 显示错误消息
          addMessageToChat('ai', '抱歉，出现了错误，请稍后再试。');
          console.error(error);
        });
    }
    
    // 添加消息到聊天历史
    function addMessageToChat(sender, message) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'flex items-start mb-4';
      
      if (sender === 'user') {
        // 用户消息（居右）
        messageDiv.className += ' justify-end';
        messageDiv.innerHTML = `
          <div class="bg-primary text-white rounded-lg rounded-tr-none p-4 max-w-[80%] shadow-sm">
            <p>${message}</p>
          </div>
          <div class="bg-gray-200 p-2 rounded-full ml-3">
            <i class="fa fa-user text-gray-600"></i>
          </div>
        `;
      } else {
        // AI消息（居左）
        messageDiv.innerHTML = `
          <div class="bg-gray-100 p-2 rounded-full mr-3">
            <i class="fa fa-robot text-primary"></i>
          </div>
          <div class="bg-white border border-gray-100 rounded-lg rounded-tl-none p-4 max-w-[80%] shadow-sm">
            <p>${message}</p>
          </div>
        `;
      }
      
      // 添加到聊天历史
      chatHistory.appendChild(messageDiv);
      
      // 滚动到底部
      chatHistory.scrollTop = chatHistory.scrollHeight;
    }
    
    // 模拟API请求（实际使用时替换为真实API调用）
    function simulateApiRequest(message) {
      return new Promise(resolve => {
        // 模拟网络延迟
        setTimeout(() => {
          // 根据用户输入返回不同的回复
          let response = '';
          if (message.includes('你好') || message.includes('hi')) {
            response = '你好！有什么我可以帮助你的吗？';
          } else if (message.includes('名字')) {
            response = '我是智能聊天助手，你可以随时向我提问。';
          } else if (message.includes('时间') || message.includes('日期')) {
            response = `现在的时间是 ${new Date().toLocaleTimeString()}，日期是 ${new Date().toLocaleDateString()}。`;
          } else {
            response = '我理解你的问题是："' + message + '"。这是一个很有趣的问题，不过目前我还在学习中，会不断提升自己的能力！';
          }
          resolve(response);
        }, 1000); // 1秒延迟
      });
    }
    
    // 事件监听
    sendButton.addEventListener('click', sendMessage);
    
    // 支持按Enter发送消息，Shift+Enter换行
    userInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault(); // 阻止默认换行行为
        sendMessage();
      }
    });
    
    // 输入框聚焦时调整样式
    userInput.addEventListener('focus', () => {
      userInput.classList.add('ring-2', 'ring-primary/50', 'border-primary');
    });
    
    // 输入框失焦时调整样式
    userInput.addEventListener('blur', () => {
      userInput.classList.remove('ring-2', 'ring-primary/50', 'border-primary');
    });
    
    // 自动调整输入框高度
    userInput.addEventListener('input', () => {
      userInput.style.height = 'auto';
      userInput.style.height = (userInput.scrollHeight) + 'px';
      
      // 限制最大高度
      if (userInput.scrollHeight > 150) {
        userInput.style.overflowY = 'auto';
        userInput.style.height = '150px';
      } else {
        userInput.style.overflowY = 'hidden';
      }
    });
  </script>
</body>
</html>